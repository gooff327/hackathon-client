{"version":3,"sources":["store/home/types.ts","store/user/types.ts","store/user/reducers.ts","store/home/reducers.ts","store/rootReducers.ts","store/index.ts","constants/index.ts","utils/apollo-init.ts","store/user/actions.ts","pages/login/index.tsx","gql/index.ts","store/home/actions.ts","pages/home/components/PostSource/index.tsx","pages/home/components/PostFooter/index.tsx","pages/home/components/Post/index.tsx","pages/home/components/Trending/index.tsx","pages/home/index.tsx","pages/user/index.tsx","pages/user/profile.tsx","pages/postDetail/components/addComment.tsx","pages/postDetail/components/comments.tsx","pages/postDetail/index.tsx","constants/routes.ts","pages/editPostModal/index.tsx","components/UserPopover/index.tsx","assets/images/logo.svg","components/Header/index.tsx","constants/theme.ts","containers/ErrorBoundary/index.tsx","App.tsx","reportWebVitals.ts","index.tsx","utils/index.ts"],"names":["HomeActionEnumTypes","UserActionTypesEnum","initialState","me","getFromLocalStorage","userReducer","state","action","type","UPDATE_USER","payload","filters","category","keyword","sortReverse","sortByDate","sortByHot","homeReducer","UPDATE_KEYWORD","UPDATE_CATEGORY","UPDATE_SORT","rootReducer","combineReducers","user","home","useSelector","useReduxSelector","store","configureStore","reducer","hot","module","accept","nextRootReducer","require","replaceReducer","PostTypeEnum","PostTypeTest","ROAST","SECOND_HAND","SOCIAL","RENT","OTHERS","CategoryIconMap","authLink","setContext","_","headers","token","authorization","client","ApolloClient","cache","InMemoryCache","link","concat","createUploadLink","uri","updateUser","SIGN_IN","gql","SIGN_UP","QUERY_EMAIL_STATUS","initialValues","email","password","name","Login","toast","useToast","useMutation","signIn","signUp","useLazyQuery","queryEmail","emailStatus","data","useState","visible","setVisible","dispatch","useDispatch","changeLoginState","setToLocalStorage","_id","avatar","role","verified","id","desc","onSubmit","values","a","available","variables","then","catch","err","status","description","message","formik","useFormik","handleSetVisible","val","getEmailStatus","className","onClick","bind","blockScrollOnMount","isOpen","size","onClose","p","handleSubmit","value","placeholder","onChange","handleChange","onBlur","fetchHotPosts","fetchPosts","fetchCategory","doLikeAction","updateCategory","PostSourceSkeleton","mt","align","w","borderRadius","height","mr","fontSize","PostSource","author","flexWrap","as","fontWeight","m","label","PostFooterSkeleton","PostFooter","createdAt","isPure","comments","likes","cursor","href","display","base","md","mx","dayjs","parseInt","format","length","Post","title","images","content","footer","navToDetail","pb","alignItems","h","justify","direction","maxH","lineHeight","maxW","objectFit","src","HottestPostSkeleton","minWidth","flex","verticalAlign","borderBottomWidth","px","sm","marginBottom","paddingBottom","width","my","HottestPost","overflow","pt","position","minH","Link","_hover","textDecoration","maxHeight","ListPost","posts","history","useHistory","map","handleNavToDetail","ListPostSkeleton","hasContent","gridGap","Trending","useQuery","loading","wrap","padding","lg","xl","minW","mb","hotPosts","slice","userSelect","variant","colorScheme","push","Home","props","page","getPosts","Categories","filter","useEffect","limit","LoadingListPlaceholder","Array","from","keys","i","maxWidth","GET_POSTS","UserInfo","goToUserProfile","MainContent","console","log","item","index","selfID","icon","findIndex","HeartFilled","style","color","HeartOutlined","CommentOutlined","UserCon","UPLOAD_IMAGE","UploadCon","uploadImage","uploadProps","showUploadList","customRequest","options","file","sendImageToCloud","res","spinning","shape","UploadOutlined","Profile","Form","useForm","form","updateUserMutation","setFieldsValue","layout","labelCol","span","wrapperCol","labelAlign","onFinish","updateMe","Item","rules","disabled","offset","htmlType","AddComment","setValue","info","resize","pr","target","pointerEvents","alert","COMMENT","Comments","activeKey","setActiveKey","ColorList","addComment","comment","Promise","resolve","reject","update","identify","modify","__typename","fields","details","replies","toReference","broadcast","optimistic","e","handleReply","getColor","charCodeAt","stopPropagation","gutter","background","substr","toUpperCase","accordion","ghost","destroyInactivePanel","Panel","showArrow","header","Number","QUERY_SPECIFIC_POST","routes","path","exact","component","hide","User","qs","parse","location","search","indicator","SyncOutlined","spin","post","fallback","CREATE_POST","EditPostForm","onCreate","onCancel","postType","setPostType","fileList","setFileList","postImages","setPostImages","menu","key","getFieldsValue","Object","entries","uploadButton","PlusOutlined","marginTop","beforeUpload","closable","okText","cancelText","onOk","validateFields","input","required","initialValue","overlay","trigger","preventDefault","DownOutlined","checkedChildren","CheckOutlined","unCheckedChildren","CloseOutlined","defaultChecked","TextArea","rows","listType","onPreview","EditPostModal","createPost","Edit","aria-label","success","warning","UserPopover","handleLogout","setIsOpen","visibility","zIndex","bg","_focus","boxShadow","marginLeft","Text","HeaderContent","useColorMode","colorMode","toggleColorMode","setColorMode","inputExpanded","setInputExpanded","inputRef","useRef","keywordFormRedux","setKeyword","React","systemColor","window","matchMedia","matches","handleSearchBtnClicked","current","focus","prevState","logo","ml","fontFamily","justifyContent","transition","Search","ref","border","paddingRight","defaultValue","onKeyDown","undefined","isDisabled","Bell","Moon","Sun","localStorage","removeItem","rounded","borderWidth","outline","borderColor","Header","top","left","right","shadow","pathname","breakpoints","createBreakpoints","customTheme","extendTheme","styles","global","img","hr","div","borderBottomColor","h2","h3","small","ErrorBoundary","hasError","error","this","children","Component","App","theme","route","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById","getItem","JSON","setItem","stringify"],"mappings":"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","file":"static/js/main.5ecb787e.chunk.js","sourcesContent":["export enum HomeActionEnumTypes {\n  UPDATE_KEYWORD = 'UPDATE_KEYWORD',\n  UPDATE_CATEGORY = 'UPDATE_CATEGORY',\n  UPDATE_SORT = 'UPDATE_SORT',\n}\n\nexport interface PostFilter {\n  category: string\n  keyword: string\n  sortReverse: boolean\n  sortByDate: boolean\n  sortByHot: boolean\n}\n\nexport interface HomeState {\n  filters: PostFilter\n}\n\ninterface UpdateCategory {\n  type: HomeActionEnumTypes.UPDATE_CATEGORY\n  payload: { category: string}\n}\n\ninterface UpdateKeyword {\n  type: HomeActionEnumTypes.UPDATE_KEYWORD\n  payload: { keyword: string}\n}\ninterface UpdateSortByDate {\n  type: HomeActionEnumTypes.UPDATE_SORT\n  payload: { sortByDate: boolean, sortByHot: boolean, sortReverse: boolean}\n}\nexport type HomeActionTypes =\n    | UpdateCategory\n    | UpdateKeyword\n    | UpdateSortByDate\n","export interface User {\n  id: string\n  avatar?: string\n  email: string\n  verified: boolean\n  role: string\n  name: string\n  desc?: string\n}\n\nexport enum UserActionTypesEnum {\n  UPDATE_USER = 'UPDATE_USER'\n}\n\ninterface UpdateUserAction {\n  type: UserActionTypesEnum.UPDATE_USER\n  payload: User\n}\n\nexport interface UserState {\n  me: User\n}\nexport type UserActionTypes = UpdateUserAction\n","import { UserActionTypes, UserActionTypesEnum, UserState } from './types'\nimport { getFromLocalStorage } from '../../utils'\n\nconst me = getFromLocalStorage('me')\n\nconst initialState: UserState = {\n  me: me\n}\n\nconst userReducer = (state = initialState, action: UserActionTypes) => {\n  switch (action.type) {\n    case UserActionTypesEnum.UPDATE_USER:\n      return {\n        ...state,\n        me: {\n          ...state.me,\n          ...action.payload\n        }\n      }\n    default: return state\n  }\n}\nexport default userReducer\n","import { HomeState, HomeActionTypes, HomeActionEnumTypes } from './types'\n\nconst initialState: HomeState = {\n  filters: {\n    category: '',\n    keyword: '',\n    sortReverse: true,\n    sortByDate: false,\n    sortByHot: true\n  }\n}\n\nconst homeReducer = (state = initialState, { type, payload }: HomeActionTypes) => {\n  switch (type) {\n    case HomeActionEnumTypes.UPDATE_KEYWORD:\n    case HomeActionEnumTypes.UPDATE_CATEGORY:\n    case HomeActionEnumTypes.UPDATE_SORT:\n      return {\n        ...state,\n        filters: {\n          ...state.filters,\n          ...payload\n        }\n      }\n    default: return state\n  }\n}\n\nexport default homeReducer\n","import { combineReducers } from 'redux'\nimport {\n  useSelector as useReduxSelector,\n  TypedUseSelectorHook\n} from 'react-redux'\nimport userReducer from './user/reducers'\nimport homeReducer from './home/reducers'\n\nconst rootReducer = combineReducers({\n  user: userReducer,\n  home: homeReducer\n})\n\nexport type RootState = ReturnType<typeof rootReducer>\nexport default rootReducer\n\nexport const useSelector: TypedUseSelectorHook<RootState> = useReduxSelector\n","import rootReducer from './rootReducers'\nimport { configureStore } from '@reduxjs/toolkit'\n\nconst store = configureStore({\n  reducer: rootReducer\n})\n\n// @ts-ignore\nconst { hot } = module\n\nif (hot) {\n  // Enable Webpack hot module replacement for reducers\n  hot.accept('./rootReducers', () => {\n    const nextRootReducer = require('./rootReducers')\n    store.replaceReducer(nextRootReducer)\n  })\n}\n\nexport default store\n","export const ApolloServerURL = process.env.NODE_ENV === 'development' ? 'http://localhost:12345/graphql' : '/graphql'\nexport const ProjUrl = 'https://github.com/gooff327/hackathon-client'\n\nexport enum PostTypeEnum {\n  ROAST = 'roast',\n  SECOND_HAND = 'second-hand',\n  RENT = 'rent',\n  SOCIAL = 'social',\n  OTHERS = 'others'\n}\n\nexport const PostTypeTest = {\n  [PostTypeEnum.ROAST]: '吐槽一下',\n  [PostTypeEnum.SECOND_HAND]: '闲置交易',\n  [PostTypeEnum.SOCIAL]: '约饭/桌游/...',\n  [PostTypeEnum.RENT]: '求/招租',\n  [PostTypeEnum.OTHERS]: '其他'\n}\nexport const CategoryIconMap:{[id: string]: string} = {\n  [PostTypeEnum.ROAST]: '🤬',\n  [PostTypeEnum.SECOND_HAND]: '💰',\n  [PostTypeEnum.SOCIAL]: '🍻',\n  [PostTypeEnum.RENT]: '🏘',\n  [PostTypeEnum.OTHERS]: '🙈'\n}\n","import { ApolloClient, InMemoryCache } from '@apollo/client'\nimport { ApolloServerURL } from '../constants'\nimport { createUploadLink } from 'apollo-upload-client'\nimport { setContext } from '@apollo/client/link/context'\nimport { getFromLocalStorage } from './index'\n\nconst authLink = setContext((_, { headers }) => {\n  const token = getFromLocalStorage('token')\n  return {\n    headers: {\n      ...headers,\n      authorization: token\n    }\n  }\n})\nconst client = new ApolloClient({\n  cache: new InMemoryCache(),\n  link: authLink.concat(createUploadLink({ uri: ApolloServerURL }))\n})\nexport default client\n","import { User, UserActionTypes, UserActionTypesEnum } from './types'\n\nexport const updateUser = (user: User): UserActionTypes => ({\n  type: UserActionTypesEnum.UPDATE_USER,\n  payload: user\n})\n","import React, { useState } from 'react'\nimport { Modal, Input, Button, FormControl, ModalHeader, ModalOverlay, ModalContent, ModalBody, useToast } from '@chakra-ui/react'\nimport './style.scss'\nimport { gql } from 'apollo-boost'\nimport { useMutation, useLazyQuery } from '@apollo/react-hooks'\nimport { setToLocalStorage } from '../../utils'\nimport { updateUser } from '../../store/user/actions'\nimport { setContext } from '@apollo/client/link/context'\nimport { useDispatch } from 'react-redux'\nimport { Formik, useFormik } from 'formik'\nimport { extend } from 'dayjs'\n\n// 登录\nconst SIGN_IN = gql`\n    mutation signIn($email: String!, $password: String!) {\n      signIn(input: {email: $email, password: $password}) {\n        token\n        user {\n          _id email avatar role verified name\n        }\n      }\n    }\n`\n\n// 注册\nconst SIGN_UP = gql`\n  mutation signUp($email: String!, $password: String!, $name: String!) {\n    signUp( input: {email: $email,password: $password,name: $name\n    }) {\n      token\n      user {\n        _id email avatar role verified name\n      }\n    }\n  }\n`\n\n// 查询账号是否已注册\nconst QUERY_EMAIL_STATUS = gql`\n    query queryEmail($email: String!) {\n      email(email:$email) {\n        available\n      }\n    }\n`\nconst initialValues = { email: '', password: '', name: '' }\nconst Login = () => {\n  const toast = useToast()\n  const [signIn] = useMutation(SIGN_IN)\n  const [signUp] = useMutation(SIGN_UP)\n  const [queryEmail, { data: emailStatus }] = useLazyQuery(QUERY_EMAIL_STATUS)\n\n  const [visible, setVisible] = useState(false)\n  const dispatch = useDispatch()\n\n  const changeLoginState = (data: any) => {\n    setVisible(false)\n    setToLocalStorage('token', data.token)\n    const { _id, email, avatar, role, verified, name, desc } = data.user\n    const user = { id: _id, email, avatar, name, role, verified, desc }\n    setToLocalStorage('me', user)\n    dispatch(updateUser(user))\n    setContext((_, { headers }) => {\n      return {\n        headers: {\n          ...headers,\n          authorization: data.token\n        }\n      }\n    })\n  }\n\n  const onSubmit = async (values:any) => {\n    const { email, password, name } = values\n    if (emailStatus?.email?.available) {\n      await signIn({ variables: { email, password } })\n        .then(({ data }) => {\n          changeLoginState(data.signIn)\n        })\n        .catch(err => {\n          toast({ status: 'error', description: err.message })\n        })\n    } else {\n      await signUp({ variables: { email, password, name } })\n        .then(({ data }: any) => {\n          changeLoginState(data.signUp)\n        })\n        .catch(err => {\n          toast({ status: 'error', description: err.message })\n        })\n    }\n  }\n\n  const formik = useFormik({\n    initialValues,\n    onSubmit\n  })\n  const handleSetVisible = (val:boolean) => {\n    setVisible(val)\n  }\n\n  const getEmailStatus = async () => {\n    queryEmail({ variables: { email: formik.values.email } })\n  }\n\n  return (<div className={'login'}>\n    <Button className={'login-btn'} onClick={handleSetVisible.bind(null, true)}>登录/注册</Button>\n    <Modal\n      blockScrollOnMount={false}\n      isOpen={visible}\n      size={'md'}\n      onClose={handleSetVisible.bind(null, false)}\n    >\n      <ModalOverlay/>\n      <ModalContent p={10} className={'login-modal'}>\n        <ModalHeader>{ emailStatus && !emailStatus?.email?.available ? '注册' : '登录'}</ModalHeader>\n        <ModalBody>\n          <form name={'login'} onSubmit={formik.handleSubmit}>\n            <label>邮箱</label>\n            <Input\n              name=\"email\"\n              value={formik.values.email} placeholder={'请输入邮箱账号'} onChange={formik.handleChange}\n              onBlur={getEmailStatus}/>\n            {\n              emailStatus && !emailStatus?.email?.available && <>\n                <label>用户名</label>\n                <Input\n                  name={'name'}\n                  value={formik.values.name}\n                  onChange={formik.handleChange}\n                  placeholder={'这个邮箱还没注册哦，请设置用户名完成注册'}\n                />\n              </>\n            }\n            <label>密码</label>\n            <Input\n              type={'password'}\n              name={'password'}\n              value={formik.values.password}\n              onChange={formik.handleChange}\n              placeholder={'请输入密码'}\n            />\n            <FormControl className={'login-button'}>\n              <Button type={'submit'}>\n                { emailStatus && !emailStatus?.email?.available ? '注册' : '登录'}\n              </Button>\n            </FormControl>\n          </form>\n          <a className={'forget-password'}>忘记密码</a>\n        </ModalBody>\n\n      </ModalContent>\n    </Modal>\n  </div>)\n}\nexport default Login\n","import { gql } from 'apollo-boost'\n\nexport const fetchHotPosts = gql`    \n    query{\n        hotPosts{\n            _id\n            title\n            createdAt\n            author{\n                name\n            }\n            likes{\n                avatar\n            }\n            comments {\n                _id\n            }\n            images\n            content\n            category{\n                value\n                label\n            }\n        }\n    }\n`\nexport const fetchPosts = gql`    \n    query ($category: String, $keyword: String, $page: Int!, $limit: Int!, $sortByDate: Boolean, $sortByHot: Boolean, $sortReverse: Boolean) {\n        posts(filter: {category: $category, keyword: $keyword},\n            pagination: { page: $page, limit: $limit}, \n            rank: {sortByDate: $sortByDate, sortByHot: $sortByHot, sortReverse: $sortReverse}) \n        {\n            hasPrevPage\n            hasNextPage\n            data {\n                _id\n                title\n                createdAt\n                author {\n                    name\n                }\n                likes{\n                    avatar\n                }\n                comments{\n                    _id\n                }\n                views\n                images\n                content\n                category {\n                    label\n                    value\n                }\n            }\n            hasNextPage\n        }\n    }\n`\n\nexport const fetchCategory = gql`\nquery {\n    category {\n        __typename\n        label\n        value\n    }\n}\n\n`\n\nexport const doLikeAction = gql`\n    mutation($target: ID!) {\n        likeAction(target: $target) {\n            _id\n            title\n            createdAt\n            author {\n                name\n            }\n            likes{\n                avatar\n            }\n            comments{\n                _id\n            }\n            views\n            images\n            category {\n                label\n                value\n            }\n        }\n    }\n`\n","import { HomeActionTypes, HomeActionEnumTypes } from './types'\n\nexport const updateKeyword = (payload: { keyword: string }): HomeActionTypes => ({\n  type: HomeActionEnumTypes.UPDATE_KEYWORD,\n  payload: payload\n})\nexport const updateCategory = (payload: { category: string }): HomeActionTypes => ({\n  type: HomeActionEnumTypes.UPDATE_CATEGORY,\n  payload: payload\n})\nexport const updateSort = (payload: { sortByDate: boolean, sortReverse: boolean, sortByHot: boolean }): HomeActionTypes => ({\n  type: HomeActionEnumTypes.UPDATE_SORT,\n  payload: payload\n})\n","import React from 'react'\nimport { Box, Flex, Skeleton, Text } from '@chakra-ui/react'\nimport { CategoryIconMap } from '../../../../constants'\n\nconst PostSource = ({ category, author: { name }, mt }: any) =>\n  <Flex align={'center'} mt={mt || 0} flexWrap={'wrap'}>\n    <Text as={'span'} mr={'10px'} fontSize={'20px'}>{CategoryIconMap[category.value]}</Text>\n    <Text as={'span'} fontSize={'13px'} fontWeight={500}>{name}</Text>\n    <Text as={'small'} fontSize={'13px'} fontWeight={500} m={'0 4px'}>in</Text>\n    <Text as={'span'} fontSize={'13px'} fontWeight={500}>{category.label}</Text>\n  </Flex>\nexport const PostSourceSkeleton = ({ mt }: any) =>\n  <Flex align={'center'}>\n    <Skeleton w={'20px'} borderRadius={'50%'} height={'20px'} mt={mt} mr={'10px'} fontSize={'20px'}/>\n    <Skeleton w={'120px'} height={'12px'} mt={mt} fontSize={'20px'}/>\n  </Flex>\n\nexport default PostSource\n","import React, { FunctionComponent } from 'react'\nimport { Flex, Link, Skeleton, Text, Button } from '@chakra-ui/react'\nimport dayjs from 'dayjs'\n\nimport { CommentOutlined, HeartFilled, HeartOutlined } from '@ant-design/icons'\nimport { Comment } from '../../../../types'\n\nexport interface PostFooterProps {\n  createdAt: string,\n  _id: string,\n  mt: string\n  likes?: any[],\n  comments?: Comment[]\n  isPure: boolean\n}\n\nconst PostFooter: FunctionComponent<PostFooterProps> = (\n  {\n    mt,\n    _id,\n    createdAt,\n    isPure,\n    comments,\n    likes\n  }) =>\n  <Flex mt={mt} fontSize={'12px'} cursor={'default'}>\n    <Link as={'a'} href={`/detail?id=${_id}`} display={{ base: 'none', md: 'block' }}>阅读全文</Link>\n    <Text as={'small'} mx={'6px'} display={{ base: 'none', md: 'block' }}>·</Text>\n    <Text as={'small'}>{dayjs(parseInt(createdAt)).format('YYYY-MM-DD')}</Text>\n    {\n      !isPure && likes && comments && <>\n        <Text as={'small'} mx={'6px'}>·</Text>\n        <Text as={'small'}> {likes.length} 人喜欢 </Text>\n        <Text as={'small'} mx={'6px'}>·</Text>\n        <Text as={'small'}>{comments.length}条评论 </Text>\n      </>\n    }\n\n  </Flex>\nexport const PostFooterSkeleton = ({ mt }: any) =>\n  <Skeleton w={'40%'} height={'12px'} mt={mt} fontSize={'20px'}/>\nexport default PostFooter\n","import { Flex, Image, Text, Icon } from '@chakra-ui/react'\nimport PostSource from '../PostSource'\nimport PostFooter from '../PostFooter'\nimport React, { FunctionComponent, ReactElement } from 'react'\n\ninterface PostProps {\n  _id: string\n  author: any\n  category: { label: string, value: string }\n  title: string\n  createdAt: string\n  images: string[],\n  content?: ReactElement\n  footer?: ReactElement,\n  navToDetail: () => void\n}\n\nconst Post: FunctionComponent<PostProps> = (\n  {\n    _id,\n    author,\n    category,\n    title,\n    createdAt,\n    images,\n    content,\n    footer,\n    navToDetail\n  }) => <Flex key={_id} pb={'30px'} alignItems={'center'}>\n  <Flex w={'100%'} h={'100%'} justify={'space-between'} direction={'column'}>\n    <PostSource category={category} author={author}/>\n    <Text\n      className={'post-title'}\n      as={'h2'}\n      fontSize={'16px'}\n      maxH={content ? '20px' : '40px'}\n      lineHeight={'20px'}\n      fontWeight={700}\n      mr={'12px'}\n      onClick={navToDetail}\n    >\n      {title}\n    </Text>\n    {content}\n    {footer || <PostFooter createdAt={createdAt} _id={_id} mt={'8px'} isPure={true}/>}\n  </Flex>\n  <Flex\n    maxW={content ? '200px' : '100px'}\n    maxH={content ? '130px' : '100px'}\n    w={{ base: '140px', md: content ? '200px' : '100px' }}\n    h={content ? '130px' : '100px'}\n  >\n    {\n      (images.length > 0) ? <Image\n        objectFit={'cover'}\n        maxW={content ? '200px' : '100px'}\n        w={{ base: '140px', md: content ? '200px' : '140px' }}\n        src={images[0]}\n        borderRadius={'4px'}/>\n        : <Text w={{ base: '140px', md: content ? '200px' : '140px' }}/>\n    }\n  </Flex>\n</Flex>\n\nexport default Post\n","import { useQuery } from '@apollo/react-hooks'\nimport React, { FunctionComponent } from 'react'\nimport { fetchHotPosts } from '../../../../gql'\nimport { Avatar, Box, Button, Divider, Flex, Image, Link, Skeleton, Text, useColorModeValue } from '@chakra-ui/react'\nimport PostSource, { PostSourceSkeleton } from '../PostSource'\nimport PostFooter, { PostFooterSkeleton } from '../PostFooter'\nimport { PostType } from '../../../../types'\nimport Post from '../Post'\nimport { useHistory } from 'react-router-dom'\nimport { handleNavToDetail } from '../../index'\n\nconst HottestPostSkeleton = () => (\n  <Flex minWidth={'330px'} flex={1} direction={'column'} verticalAlign={'middle'}\n    borderBottomWidth={{ base: '1px', md: '0px' }}\n    px={{ base: '12px', sm: ' 16px', md: '16px' }}\n    marginBottom={{ base: '32px', md: '0px' }}\n    paddingBottom={{ base: '32px', md: '0px' }} >\n    <Box w={'100%'} h={'520px'} >\n      <Link>\n        <Skeleton width={'100%'} height={'50%'} borderRadius={'4px'}/>\n      </Link>\n      <PostSourceSkeleton mt={'16px'}/>\n      <Link >\n        <Skeleton height={'28px'} my={'10px'} lineHeight={'28px'}/>\n        <Skeleton as={'p'} className={'post-desc'} my={'10px'} height={'20px'}/>\n        <Skeleton as={'p'} className={'post-desc'} my={'10px'} height={'20px'} width={'50%'} />\n      </Link>\n      <PostFooterSkeleton mt={'16px'}/>\n    </Box>\n  </Flex>\n)\n\nconst HottestPost = ({ _id, images, author, category, title, content, createdAt }: PostType) => <Flex minWidth={'330px'}\n  flex={1}\n  direction={'column'}\n  verticalAlign={'middle'}\n  borderBottomWidth={{ base: '1px', md: '0px' }}\n  marginBottom={{ base: '32px', md: '8px' }}\n  paddingBottom={{ base: '32px', md: '8px' }}\n  px={{ base: '12px', sm: ' 16px', md: '16px' }}\n>\n  <Box w={'100%'} overflow={'hidden'}>\n    <Link pb={'unset'} pt={'10px'} as={'div'} href={`/detail?id=${_id}`} w={'100%'}>\n      <Image position={'static'} w={'100%'} minH={'200px'} maxH={'400px'} src={images[0]} borderRadius={'4px'} objectFit={'cover'}/>\n    </Link>\n  </Box>\n  <PostSource category={category} author={author} mt={'16px'}/>\n  <Box as={Link} href={`/detail?id=${_id}`} _hover={{ textDecoration: 'none' }}>\n    <Text as={'h2'} className={'post-title'} fontSize={'22px'} fontWeight={700} maxHeight={'56px'}\n      lineHeight={'28px'}>{title}</Text>\n    <Text as={'h3'} className={'post-desc'} pt={'6px'} fontSize={'18px'} maxHeight={'84px'}\n      lineHeight={'28px'}>{content}</Text>\n  </Box>\n  <PostFooter createdAt={createdAt} _id={_id} mt={'16px'} isPure={true}/>\n</Flex>\n\nconst ListPost = ({ posts }: any) => {\n  const history = useHistory()\n\n  return posts.map(({ _id, images, author, category, title, createdAt }: any) => <Post\n    key={_id}\n    _id={_id}\n    images={images}\n    author={author}\n    title={title}\n    category={category}\n    createdAt={createdAt}\n    navToDetail={() => handleNavToDetail(history, _id)}\n  />)\n}\ninterface ListPostSkeletonProps {\n  hasContent?: boolean\n}\nexport const ListPostSkeleton: FunctionComponent<ListPostSkeletonProps> = ({ hasContent }) =>\n  <Flex pb={'30px'} gridGap={'12px'} alignItems={'center'}>\n    <Flex w={'100%'} h={'100%'} justify={'space-between'} direction={'column'}>\n      <PostSourceSkeleton />\n      <Skeleton h={'20px'} my={'10px'} mr={'12px'}/>\n      <Skeleton h={'20px'} my={'10px'} w={'75%'} mr={'12px'}/>\n      <PostFooterSkeleton mt={'8px'} />\n    </Flex>\n    <Flex>\n      <Skeleton w={ hasContent ? '200px' : '100px'} h={ hasContent ? '130px' : '100px'}/>\n    </Flex>\n  </Flex>\n\nconst Trending = () => {\n  const { loading, data } = useQuery(fetchHotPosts)\n  if (loading) {\n    return <Box m={['0 12px', '0 24px', '0 48px', '0 48px']}>\n      <Flex wrap={'wrap'} gridGap={'16px'} direction={{ base: 'column', sm: 'column', md: 'row' }}>\n        <HottestPostSkeleton/>\n        <Box minWidth={'330px'} flex={1} borderBottomWidth={{ base: '1px', sm: 0, md: 0 }}\n          marginBottom={{ base: '32px', sm: 0 }}\n          padding={{ base: '0 12px', sm: '0 16px' }}\n        >\n          <ListPostSkeleton/>\n          <ListPostSkeleton/>\n          <ListPostSkeleton/>\n          <ListPostSkeleton/>\n        </Box>\n        <Flex\n          minWidth={'330px'}\n          padding={{ base: '12px', sm: '16px' }}\n          direction={'column'}\n          flex={1}\n          flexWrap={'wrap'}\n\n        >\n          <Box flex={{ sm: 0, md: 0, lg: 0, xl: 0 }} borderBottomWidth={{ base: '1px', sm: 0, md: 0 }}\n\n            pb={'14px'}\n            w={{ sm: '100%', md: '50%', lg: '100%' }}\n            minW={'300px'}\n          >\n            <Skeleton h={'16px'} w={'30%'} mb={'20px'}/>\n            <Flex w={'100%'} my={'6px'}>\n              <Flex direction={'column'} align={'center'} mr={'10px'}>\n                <Skeleton w={'64px'} h={'64px'} borderRadius={'50%'} mb={'4px'} />\n                <Skeleton h={'12px'} width={'60px'}/>\n              </Flex>\n              <Flex direction={'column'} align={'center'}>\n                <Skeleton w={'64px'} h={'64px'} borderRadius={'50%' } mb={'4px'} />\n                <Skeleton h={'12px'} width={'60px'}/>\n              </Flex>\n            </Flex>\n          </Box>\n          <Box flex={1} pb={'12px'}>\n            <Skeleton h={'16px'} mb={'20px'} w={'30%'}/>\n            <Flex justify={'space-between'} align={'center'} my={'24px'}>\n              <Skeleton h={'32px'} w={'40%'}/>\n              <Skeleton h={'32px'} w={'48px'}/>\n            </Flex>\n            <Flex justify={'space-between'} align={'center'} my={'24px'}>\n              <Skeleton h={'32px'} w={'40%'}/>\n              <Skeleton h={'32px'} w={'48px'}/>\n            </Flex>\n            <Flex justify={'space-between'} align={'center'} my={'24px'}>\n              <Skeleton h={'32px'} w={'40%'}/>\n              <Skeleton h={'32px'} w={'48px'}/>\n            </Flex>\n          </Box>\n        </Flex>\n      </Flex>\n    </Box>\n  }\n  if (data) {\n    return <Flex\n      m={['0 12px', '0 24px', '0 48px', '0 48px']}\n      h={'auto'}\n    >\n      <Flex\n        flex={1}\n        wrap={'wrap'}\n        gridGap={'16px'}\n        direction={{ base: 'column', md: 'row' }}\n        borderBottomWidth={'1px'}\n        pb={'24px'}\n      >\n        { data.hotPosts[0] && <HottestPost {...data.hotPosts[0]}/> }\n        <Box minWidth={'330px'} flex={1} borderBottomWidth={{ base: '1px', sm: 0, md: 0 }}\n          marginBottom={{ base: '32px', sm: 0 }}\n          padding={{ base: '0 12px', sm: '0 16px' }}\n        >\n          <ListPost posts={data.hotPosts.slice(1, 5)}/>\n        </Box>\n        <Flex\n          minWidth={'330px'}\n          padding={{ base: '12px', sm: '16px' }}\n          direction={{ base: 'column', md: 'row', lg: 'row', xl: 'column' }}\n          flex={1}\n          flexWrap={'wrap'}\n\n        >\n          <Box\n            flex={{ sm: 0, md: 0, lg: 0, xl: 0 }}\n            borderBottomWidth={{ base: '1px', sm: 0, md: 0 }}\n            pb={'12px'}\n            mb={'12px'}\n            w={{ sm: '100%', md: '50%', lg: '100%' }}\n            minW={'300px'}\n          >\n            <Text as={'h2'} fontWeight={600} pb={'20px'}>最近更新</Text>\n            <Flex w={'100%'} gridGap={'10px'}>\n              <Flex direction={'column'} align={'center'}>\n                <Avatar w={'64px'} h={'64px'} src={'https://i.loli.net/2020/10/30/SM4GnApW5VRzrTv.jpg'}/>\n                <Text as={'span'} fontSize={'12px'}>Gooff</Text>\n              </Flex>\n            </Flex>\n          </Box>\n          <Box flex={1} pb={'12px'} userSelect={'none'}>\n            <Text as={'h2'} fontWeight={600} pb={'20px'}>可能感兴趣的话题</Text>\n            <Flex justify={'space-between'} align={'center'}>\n              <Text fontWeight={700} fontSize={'16px'}>吐槽一下</Text>\n              <Button variant={'outline'} size={'sm'} colorScheme={'black'}>关注</Button>\n            </Flex>\n            <Divider m={'16px 0'}/>\n            <Flex justify={'space-between'} align={'center'}>\n              <Text fontWeight={700} fontSize={'16px'}>闲置交互</Text>\n              <Button variant={'outline'} size={'sm'} colorScheme={'black'}>关注</Button>\n            </Flex>\n            <Divider m={'16px 0'}/>\n            <Flex justify={'space-between'} align={'center'} mb={'16px'}>\n              <Text fontWeight={700} fontSize={'16px'}>植发</Text>\n              <Button variant={'outline'} size={'sm'} colorScheme={'black'}>关注</Button>\n            </Flex>\n          </Box>\n        </Flex>\n      </Flex>\n    </Flex>\n  }\n  return <></>\n}\n\nexport default Trending\n","import React, { useEffect, useState } from 'react'\nimport { useLazyQuery, useMutation, useQuery } from '@apollo/react-hooks'\nimport './index.scss'\nimport { RouteComponentProps } from 'react-router'\nimport { doLikeAction, fetchCategory, fetchPosts } from '../../gql'\nimport { useHistory } from 'react-router-dom'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { RootState } from '../../store/rootReducers'\nimport { PostFilter } from '../../store/home/types'\nimport {\n  updateCategory, updateSort\n} from '../../store/home/actions'\nimport Trending, { ListPostSkeleton } from './components/Trending'\nimport { Box, Flex, Text } from '@chakra-ui/react'\nimport { PostType } from '../../types'\nimport Post from './components/Post'\nimport PostFooter from './components/PostFooter'\n\nexport const handleNavToDetail = (history: ReturnType<typeof useHistory>, id:string) => {\n  history.push(`/detail?id=${id}`)\n}\n\nconst Home = (props: RouteComponentProps) => {\n  const limit = 10\n  const defaultPage = 1\n  const [page, setPage] = useState(defaultPage)\n  const [getPosts, { loading, data }] = useLazyQuery(fetchPosts)\n  const { data: Categories } = useQuery(fetchCategory)\n  const [handleLike] = useMutation(doLikeAction)\n  const dispatch = useDispatch()\n  const filter = useSelector<RootState, PostFilter>(state => state.home.filters)\n\n  useEffect(() => {\n    if (filter.category === '') return\n    getPosts({\n      variables: {\n        limit,\n        page: defaultPage,\n        ...filter\n      }\n    })\n  }, [filter])\n\n  const history = useHistory()\n\n  useEffect(() => {\n    if (Categories && !filter.category) {\n      dispatch(updateCategory({ category: Categories.category[0].value }))\n      getPosts({\n        variables: { category: Categories.category[0].value, keyword: '', page, limit }\n      })\n    }\n  }, [Categories])\n\n  const onBtnClick = async (value: string) => {\n    dispatch(updateCategory({ category: value }))\n    await getPosts({\n      variables: { category: value, keyword: '', limit, page: 1 }\n    })\n  }\n\n  const handleFetchMore = async (p: number) => {\n    await getPosts({\n      variables: { ...filter, limit, page: p }\n    })\n    setPage(p)\n  }\n\n  const handleLikeBtnClick = async (pid: any, index: number) => {\n    await handleLike({\n      variables: {\n        target: pid\n      }\n    }).catch(error => {\n      throw error\n    })\n  }\n\n  const handleUpdateSort = (payload : any) => {\n    dispatch(updateSort(payload))\n  }\n\n  const LoadingListPlaceholder = () => <>\n    {\n      Array.from(new Array(5).keys()).map(i => <ListPostSkeleton key={i} hasContent />)\n    }\n  </>\n\n  return (\n    <Flex m={'auto'} flex={1} direction={'column'} width={'100%'} maxWidth={'1192px'} className={'home-wrapper'}>\n      <Trending />\n      {/* <Box m={['0 12px', '0 24px', '0 48px', '0 48px']} className={'sort-wrapper'}> */}\n      {/*  <div> */}\n      {/*    <Button */}\n      {/*      shape={'round'} */}\n      {/*      type={filter.sortByDate && filter.sortReverse ? 'primary' : 'default'} */}\n      {/*      size={'small'} */}\n      {/*      onClick={() => handleUpdateSort({ sortReverse: true, sortByDate: true, sortByHot: false })} */}\n      {/*    > */}\n      {/*      按日期降序 */}\n      {/*    </Button> */}\n      {/*    <Button */}\n      {/*      shape={'round'} */}\n      {/*      type={filter.sortByDate && !filter.sortReverse ? 'primary' : 'default'} */}\n      {/*      size={'small'} */}\n      {/*      onClick={() => handleUpdateSort({ sortReverse: false, sortByDate: true, sortByHot: false })} */}\n      {/*    > */}\n      {/*      按日期升序 */}\n      {/*    </Button>  <Button */}\n      {/*      shape={'round'} */}\n      {/*      type={filter.sortByHot && filter.sortReverse ? 'primary' : 'default'} */}\n      {/*      size={'small'} */}\n      {/*      onClick={() => handleUpdateSort({ sortReverse: true, sortByDate: false, sortByHot: true })} */}\n      {/*    > */}\n      {/*    按热度降序 */}\n      {/*    </Button> */}\n      {/*    <Button */}\n      {/*      shape={'round'} */}\n      {/*      type={filter.sortByHot && !filter.sortReverse ? 'primary' : 'default'} */}\n      {/*      size={'small'} */}\n      {/*      onClick={() => handleUpdateSort({ sortReverse: false, sortByDate: false, sortByHot: true })} */}\n      {/*    > */}\n      {/*      按热度升序 */}\n      {/*    </Button> */}\n      {/*  </div> */}\n      {/*  <div className={'pagination-btn-wrapper'}> */}\n      {/*    <Button */}\n      {/*      disabled={!data.posts.hasPrevPage } */}\n      {/*      shape={'round'} */}\n      {/*      size={'small'} */}\n      {/*      className={'shadow-2xl'} */}\n      {/*      onClick={() => handleFetchMore(page - 1)} */}\n      {/*      icon={<ArrowUpOutlined/>} */}\n      {/*    /> */}\n      {/*    <Button */}\n      {/*      disabled={!data.posts.hasNextPage} */}\n      {/*      size={'small'} */}\n      {/*      shape={'round'} */}\n      {/*      className={'shadow-2xl'} */}\n      {/*      onClick={() => handleFetchMore(page + 1)} */}\n      {/*      icon={<ArrowDownOutlined/>} */}\n      {/*    /> */}\n      {/*  </div> */}\n      {/* </Box> */}\n      {\n        loading && <Box as={'ul'} m={['24px 24px', '24px 40px', '24px 64px', '24px 64px']}>\n          {<LoadingListPlaceholder/>}\n        </Box>\n      }\n      {\n        data && Categories && <Box as={'ul'} m={['24px 24px', '24px 40px', '24px 64px', '24px 64px']}>\n          {\n            data.posts.data.map(({ _id, likes, images, comments, title, author, createdAt, category, content }: PostType) =>\n              <Post\n                key={_id}\n                _id={_id}\n                author={author}\n                category={category}\n                title={title}\n                createdAt={createdAt}\n                images={images}\n                navToDetail={() => handleNavToDetail(history, _id)}\n                content={\n                  <Text\n                    as={'p'}\n                    cursor={'default'}\n                    className={'post-desc'}\n                    pt={'6px'}\n                    fontSize={'14px'}\n                    maxHeight={'56px'}\n                    lineHeight={'28px'}\n                    mr={'10px'}\n                    onClick={() => handleNavToDetail(history, _id)}\n                  >\n                    {content}\n                  </Text>}\n                footer={\n                  <PostFooter\n                    isPure={false}\n                    mt={'16px'}\n                    createdAt={createdAt}\n                    comments={comments}\n                    _id={_id}\n                    likes={likes}\n                  />}\n              />\n            )\n          }\n        </Box>\n      }\n\n    </Flex>\n  )\n}\n\nexport default Home\n","import React from 'react'\nimport { RouteComponentProps } from 'react-router'\nimport { Avatar, Button, Empty, Spin } from 'antd'\nimport { gql } from 'apollo-boost'\nimport { useQuery } from '@apollo/react-hooks'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '../../store/rootReducers'\nimport { User } from '../../store/user/types'\nimport './index.scss'\nimport ButtonGroup from 'antd/lib/button/button-group'\nimport { CommentOutlined, HeartFilled, HeartOutlined } from '@ant-design/icons'\n\nconst GET_POSTS = gql`\n  query getUserInfo {\n    me {\n      _id\n      posts {\n        _id\n        title\n        content\n        images\n        isPublic\n        createdAt\n        likes{\n          _id\n        }\n        views\n        comments {\n          type\n          content\n        }\n      }\n    }\n  }\n\n`\n\nconst UserInfo = (props:any) => {\n  const user = useSelector<RootState, User>(state => state.user.me)\n\n  const { goToUserProfile } = props\n  return (<div className='user-info'>\n    <div className=\"avatar-con\">\n      <Avatar\n        src={user.avatar}\n        className='avatar'\n        size={80}>{user.name.slice(0, 1)}</Avatar>\n      <span className='edit' onClick={goToUserProfile}>编辑</span>\n    </div>\n    <div className=\"info-con\">\n      <h2 className='title'>{user.name}</h2>\n      <div className='follow-block'>\n        <div className=\"follow-item\">\n          <span className=\"num\">0</span>\n          <span className=\"text\">粉丝</span>\n        </div>\n        <div className=\"follow-item\">\n          <span className=\"num\">0</span>\n          <span className=\"text\">关注</span>\n        </div>\n        <div className=\"follow-item\">\n          <span className=\"num\">{props?.data?.me?.posts?.length || 0}</span>\n          <span className=\"text\">文章</span>\n        </div>\n      </div>\n      <div className=\"introduction\">\n        <h4>个人简介</h4>\n        <span>{user.desc || '暂无'}</span>\n      </div>\n    </div>\n  </div>\n  )\n}\n\nconst MainContent = (props: any) => {\n  const { data, loading } = props\n  console.log('data', data)\n\n  const handleNavToDetail = () => {\n\n  }\n  const handleLikeBtnClick = (id: any, index: any) => {\n\n  }\n\n  return <div className='content'>\n    <ul>\n      {\n        data.length === 0 && <Empty description={'暂无数据'}/>\n      }\n      {\n        data.map((item: any, index: number) => {\n          console.log(item)\n          const { content, createdAt, name, _id, title, likes, comments, selfID } = item\n          return <li key={index}>\n            <div className={'left-panel'}>\n              <div className={'top-info'}>\n                <span>{createdAt}</span>\n              </div>\n              <h3 onClick={handleNavToDetail.bind(null, _id)}>{title}</h3>\n              <ButtonGroup>\n                <Button\n                  className={'btn-like'}\n                  type={'link'}\n                  icon={\n                    likes.findIndex(({ _id: uid }: { _id: any }) => uid === selfID) !== -1 ? <HeartFilled style={{ color: '#F56565' }}/> : <HeartOutlined/>}\n                  onClick={() => handleLikeBtnClick(_id, index)}\n                >\n                  { likes.length }\n                </Button>\n                <Button\n                  className={'btn-comment'}\n                  type={'link'}\n                  icon={<CommentOutlined/>}\n                  onClick={handleNavToDetail.bind(null, _id)}\n                >\n                  {comments.length}\n                </Button>\n              </ButtonGroup>\n            </div>\n\n          </li>\n        })\n      }\n    </ul>\n  </div>\n}\n\nconst UserCon = (props: RouteComponentProps) => {\n  const { loading, data } = useQuery(GET_POSTS)\n\n  const goToUserProfile = () => {\n    props.history.push('/user/profile')\n  }\n\n  return (\n    <div className='user-page'>\n      <div className='minor-area'>\n        <UserInfo data={data} goToUserProfile={goToUserProfile}/>\n      </div>\n      <div className='major-area'>\n        {\n          data && <MainContent data={data.me.posts} loading={loading}/>\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default UserCon\n","import React, { useEffect } from 'react'\nimport { Form, Input, Button, Upload, Spin, Avatar } from 'antd'\nimport { UploadOutlined } from '@ant-design/icons'\nimport { useMutation } from '@apollo/react-hooks'\nimport { gql } from 'apollo-boost'\nimport { useSelector, useDispatch } from 'react-redux'\nimport './profile.scss'\nimport { RootState } from '../../store/rootReducers'\nimport { User } from '../../store/user/types'\nimport { setToLocalStorage } from '../../utils'\nimport { updateUser } from '../../store/user/actions'\n\nconst UPLOAD_IMAGE = gql`\n  mutation sendImageToCloud($file: Image!) {\n    sendImageToCloud(file: $file) {\n      message,\n      res\n    }\n  }\n`\nconst UPDATE_USER = gql`\n    mutation updateMe($avatar: String, $desc: String) {\n      updateMe(input: {avatar: $avatar, desc: $desc, verified: false}) {\n        _id\n        name\n        avatar\n        email\n        verified\n        desc\n        role\n      }\n    }\n`\n\ninterface UploadConProps {\n  value?: string;\n  onChange?: (value: string) => void;\n}\n\nconst UploadCon: React.FC<UploadConProps> = (props) => {\n  const { value, onChange } = props\n  const [uploadImage, { loading }] = useMutation(UPLOAD_IMAGE)\n\n  const uploadProps = {\n    name: 'file',\n    action: '',\n    showUploadList: false,\n    customRequest: (options: any) => {\n      const { file } = options\n      uploadImage({ variables: { file } })\n        .then(({ data: { sendImageToCloud: { message, res } } }) => {\n          if (onChange) {\n            onChange(res)\n          }\n        })\n    }\n  }\n\n  return <div>\n    <Spin spinning={loading}>\n      <Avatar\n        src={value}\n        className='avatar'\n        shape=\"square\"\n        size={80}>Z</Avatar>\n      <Upload {...uploadProps}>\n        <Button icon={<UploadOutlined />}>点击上传</Button>\n      </Upload>\n    </Spin>\n  </div>\n}\n\nconst Profile = (props: any) => {\n  const [form] = Form.useForm()\n  const [updateUserMutation, { loading }] = useMutation(UPDATE_USER)\n  const dispatch = useDispatch()\n  const user = useSelector<RootState, User>(state => state.user.me)\n  const { avatar, name, email, desc } = user\n  form.setFieldsValue({\n    avatar,\n    name,\n    email,\n    desc\n  })\n\n  const layout = {\n    labelCol: { span: 3 },\n    wrapperCol: { span: 12 }\n  }\n  const tailLayout = {\n    wrapperCol: { offset: 3, span: 12 }\n  }\n\n  const onFinish = (values: any) => {\n    const { avatar, desc, email, name } = values\n    updateUserMutation({ variables: { avatar, desc } }).then(res => {\n      const { _id, name, avatar, role, verified, desc } = res.data.updateMe\n      const user = { id: _id, email, avatar, name, role, verified, desc }\n      setToLocalStorage('me', user)\n      dispatch(updateUser(user))\n      props.history.push('/user')\n    })\n  }\n\n  return (<div className='profile-page'>\n    <h1>个人资料</h1>\n    <Form\n      {...layout}\n      form={form}\n      name=\"basic\"\n      labelAlign='left'\n      onFinish={onFinish}\n    >\n      <Form.Item\n        {...layout}\n        label='头像'\n        name='avatar'\n      >\n        <UploadCon />\n      </Form.Item>\n      <Form.Item\n        {...layout}\n        label=\"用户名\"\n        name=\"name\"\n        rules={[{ message: '请输入用户名!' }]}\n      >\n        <Input disabled />\n      </Form.Item>\n      <Form.Item\n        label=\"邮箱\"\n        name=\"email\"\n      >\n        <Input disabled />\n      </Form.Item>\n      <Form.Item\n        label=\"个人简介\"\n        name=\"desc\"\n      >\n        <Input />\n      </Form.Item>\n\n      <Form.Item {...tailLayout}>\n        <Button type=\"primary\" htmlType=\"submit\">\n          提交\n        </Button>\n      </Form.Item>\n    </Form>\n  </div>)\n}\n\nexport default Profile\n","import { Box, InputGroup, Textarea, InputRightElement, Input, Button } from '@chakra-ui/react'\nimport React, { useEffect, useState } from 'react'\nimport './addComment.scss'\n\ninterface commentProps{\n  handleSubmit:(comment:string)=>Promise<any>\n  onBlur:(e:any)=>void\n}\n\nconst AddComment:React.FC<commentProps> = ({ handleSubmit, onBlur }) => {\n  const [value, setValue] = useState('')\n\n  const onFinish = async () => {\n    console.info('comments')\n    await handleSubmit(value)\n    setValue('')\n  }\n\n  return <Box className={'comment-input-area'}>\n\n    <InputGroup\n      size=\"md\"\n      onBlur={onBlur}\n    >\n      <Textarea\n        resize={'none'}\n        value={value}\n        pr=\"6rem\"\n        placeholder={'输入评论...'}\n        onChange={ ({ target: { value: val } }) => setValue(val)}\n      />\n      {\n        value !== '' &&\n        <InputRightElement\n          width=\"6rem\"\n          height=\"100%\"\n          pb={'1rem'}\n          alignItems={'flex-end'}\n          pointerEvents={'all'}\n          onClick={() => alert('121')}\n        >\n          <Button size={'sm'} onClick={onFinish}\n          >评论</Button>\n        </InputRightElement>\n      }\n    </InputGroup>\n\n  </Box>\n}\n\nexport default AddComment\n","import React, { useState } from 'react'\nimport { Avatar, Button, Col, Collapse, Input, Row } from 'antd'\nimport { gql } from 'apollo-boost'\nimport { useMutation } from '@apollo/react-hooks'\nimport './comment.scss'\nimport dayjs from 'dayjs'\nimport AddComment from './addComment'\nimport { CommentOutlined } from '@ant-design/icons'\nimport { QUERY_SPECIFIC_POST } from '../index'\n\nexport const COMMENT = gql`\n  mutation addComment($target:ID!,$type:CommentTarget!,$content:String!,$to:ID) {\n    addComment(input: {content: $content, target: $target, type:$type, to:$to}) {\n        _id\n        author {\n            name\n            avatar\n        }\n        type\n        content\n        createdAt\n        replies {\n            _id\n            author {\n                name\n                avatar\n            }\n            content\n            createdAt\n        }\n    }\n  }\n`\n\nconst Comments = ({ comments, id }: { comments: any, id: string}) => {\n  const [commentList, setCommentList] = useState(comments)\n  const [activeKey, setActiveKey] = useState('')\n\n  const ColorList = ['#f56a00', '#7265e6', '#ffbf00', '#00a2ae']\n\n  const [addComment] = useMutation(COMMENT)\n\n  const handleSubmit = (type:string, target:string, comment:string) => {\n    console.log(type, target, comment)\n    return new Promise((resolve, reject) => {\n      addComment({\n        variables: { type, target, content: comment },\n        update: (cache, { data: { addComment: comment } }) => {\n          console.log(cache.identify({ _id: target }), target)\n          cache.modify({\n            id: cache.identify({ __typename: 'Post', id: target }),\n            fields: {\n              _id: (value, details) => {\n                console.log(value)\n              },\n              replies: (value, details) => {\n                console.log('replies', value)\n              },\n              comments: (value, { toReference }) => {\n                return [toReference(comment), ...value]\n              }\n            },\n            broadcast: true,\n            optimistic: true\n          })\n          // const data: any = cache.readQuery({ query: QUERY_SPECIFIC_POST, variables: { id: target } })\n          // const newData = Object.assign({}, data, { post: { comments: [comment, ...data.post.comments] } })\n          // cache.writeQuery({ query: QUERY_SPECIFIC_POST, variables: { id: target }, data: newData })\n        }\n      }).then(() => {\n        setActiveKey('')\n        resolve()\n      }).catch(e => reject(e))\n    })\n  }\n\n  const handleReply = (index:string) => {\n    setActiveKey(index)\n  }\n\n  const getColor = (name:string) => {\n    return (name.charCodeAt(0) - 'A'.charCodeAt(0)) % 4\n  }\n\n  const onBlur = (e:any) => {\n    e.stopPropagation()\n    setActiveKey('')\n  }\n\n  return <div className={'comment'}>\n    <AddComment\n      onBlur={onBlur}\n      handleSubmit={handleSubmit.bind(this, 'POST', id)}\n    />\n    <div className={'comment-list'}>\n      {\n        comments && comments.map((item:any, index:number) => <div key={index} className={'comment-item'}>\n          <Row justify={'start'} gutter={[48, 12]} align={'top'}>\n            <Col span={1}>\n              <Avatar\n                style={{\n                  background: ColorList[getColor(item?.author?.name?.substr(0, 1).toUpperCase())]\n                }}\n                size={'large'}\n                src={item.author.avatar}\n              >\n                {item?.author?.name?.substr(0, 1).toUpperCase()}\n              </Avatar>\n            </Col>\n            <Col span={22} className={'comment-right'}>\n              <span className={'author'}>{item?.author?.name}</span>\n              <Collapse accordion ghost activeKey={activeKey} destroyInactivePanel={true}>\n                <Collapse.Panel key={index + 'comment'} showArrow={false} header={\n                  <span className={'comment-right-content'}>\n                    <span>{ item.content}</span>\n                    <span className={'reply'} onClick={handleReply.bind(null, index + 'comment')}>\n                      <CommentOutlined /> 回复\n                    </span>\n                  </span>}>\n                  <AddComment\n                    handleSubmit={(content) => handleSubmit('COMMENT', item._id, content)}\n                    onBlur = {onBlur}\n                  />\n                </Collapse.Panel>\n              </Collapse>\n              <span className={'time'}>{ dayjs(Number(item.createdAt)).format('YYYY年MM月DD日 HH:MM')}</span>\n              {\n                item.replies.map((item:any, index:number) => <div key={index} className={'comment-reply'}>\n                  <Row justify={'start'} gutter={[48, 12]} align={'top'}>\n                    <Col span={1}>\n                      <Avatar\n                        style={{\n                          background: ColorList[getColor(item?.author?.name?.substr(0, 1).toUpperCase())]\n                        }}\n                        size={'large'}\n                        src={item.author.avatar}\n                      >\n                        {item?.author?.name?.substr(0, 1).toUpperCase()}\n                      </Avatar>\n                    </Col>\n                    <Col span={22}>\n                      <span className={'author'}>{item?.author?.name}</span>\n                      <Collapse accordion ghost activeKey={activeKey} destroyInactivePanel={true}>\n                        <Collapse.Panel key={index + 'reply'} showArrow={false} header={\n                          <span className={'comment-right-content'}>\n                            <span>{ item.content}</span>\n                            <span className={'reply'} onClick={handleReply.bind(null, index + 'reply')}>\n                              <CommentOutlined /> 回复\n                            </span>\n                          </span>}>\n                          <AddComment\n                            handleSubmit={handleSubmit.bind(null, 'COMMENT', item._id)}\n                            onBlur = {onBlur}\n                          />\n                        </Collapse.Panel>\n                      </Collapse>\n                      <span className={'time'}>{ dayjs(Number(item.createdAt)).format('YYYY年MM月DD日 HH:MM')}</span>\n                    </Col>\n                  </Row>\n\n                </div>)\n              }\n            </Col>\n          </Row>\n        </div>)\n      }\n    </div>\n  </div>\n}\n\nexport default Comments\n","import React from 'react'\nimport { gql } from 'apollo-boost'\nimport { useQuery } from '@apollo/react-hooks'\nimport qs from 'querystring'\nimport Comments from './components/comments'\nimport './style.scss'\nimport { Avatar, Image, Spin } from 'antd'\nimport { SyncOutlined } from '@ant-design/icons'\nimport dayjs from 'dayjs'\nimport ReactMarkdown from 'react-markdown'\n\nexport const QUERY_SPECIFIC_POST = gql`\n    query querySpecificPost($id:ID!){\n            post(id: $id){\n                 _id title content images isPublic createdAt\n                author{\n                    email\n                    avatar\n                    role\n                    name\n                } \n                likes {\n                    avatar\n                }\n                comments {\n                    _id\n                    author {\n                        name\n                        avatar\n                    }\n                    type\n                    content\n                    createdAt\n                    replies {\n                        _id\n                        author {\n                            name\n                        }\n                        content\n                        createdAt\n                    }\n                }\n                category {\n                    label\n                    value\n                }\n            }\n    }\n`\n\nconst PostDetailPage = () => {\n  const { id } = qs.parse(location.search.substr(1))\n  const { data, loading } = useQuery(QUERY_SPECIFIC_POST, {\n    variables: { id }\n  })\n  const ColorList = ['#f56a00', '#7265e6', '#ffbf00', '#00a2ae']\n\n  const getColor = (name:string) => {\n    return (name.charCodeAt(0) - 'A'.charCodeAt(0)) % 4\n  }\n  if (loading) {\n    return <Spin spinning={loading} indicator={<SyncOutlined spin/>}/>\n  }\n  if (data) {\n    return <div className={'post-detail'}>\n      <div className={'author'}>\n        <Avatar\n          style={{\n            background: ColorList[getColor(data?.post?.author?.name?.substr(0, 1).toUpperCase())]\n          }}\n          src={data?.post?.author?.avatar}\n          size={48}\n        >\n          {data.post.author.name.substr(0, 1).toUpperCase()}\n        </Avatar>\n        <div className={'author-right'}>\n          <span className={'author-name'}>\n            {data.post.author.name}\n          </span>\n          <span className={'create-time'}>{ dayjs(Number(data.post.createdAt)).format('YYYY年MM月DD日 HH:MM')}</span>\n        </div>\n\n      </div>\n      <div className={'content'}>\n        <h1 style={{ padding: '10px 0' }}>{data.post.title}</h1>\n        <ReactMarkdown>{data.post.content}</ReactMarkdown>\n        {\n          data.post.images.map((item:string) => <Image\n            width={200}\n            height={200}\n            key={item}\n            src={item || 'error'}\n            fallback=\"data:image/png;base64,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\"\n          />)\n        }\n      </div>\n      <Comments comments={data.post.comments} id={id as string}/>\n    </div>\n  }\n  return null\n}\n\nexport default PostDetailPage\n","import { RouteProps } from 'react-router-dom'\nimport { ReactElement } from 'react'\nimport Login from '../pages/login'\nimport Home from '../pages/home'\nimport User from '../pages/user'\nimport Profile from '../pages/user/profile'\nimport PostDetailPage from '../pages/postDetail'\n\nexport interface Route extends RouteProps {\n  icon?: ReactElement,\n  name: string\n  hide: boolean\n}\n\nconst routes: Route[] = [\n  {\n    path: '/',\n    name: '首页',\n    exact: true,\n    component: Home,\n    hide: false\n  },\n  {\n    path: '/message',\n    name: '消息',\n    component: Login,\n    exact: true,\n    hide: false\n  },\n  {\n    path: '/search',\n    name: '搜索',\n    component: Login,\n    exact: true,\n    hide: true\n  },\n  {\n    path: '/user',\n    name: '我的',\n    exact: true,\n    component: User,\n    hide: false\n  },\n  {\n    path: '/detail',\n    name: '详情',\n    component: PostDetailPage,\n    hide: true\n  },\n  {\n    path: '/user/profile',\n    name: '个人信息',\n    component: Profile,\n    hide: true\n  }\n]\nexport default routes\n","import React, { useState } from 'react'\nimport { Button, Col, Dropdown, Form, Input, Menu, message, Modal, Row, Switch, Upload } from 'antd'\nimport { DownOutlined, PlusOutlined, CheckOutlined, CloseOutlined } from '@ant-design/icons'\nimport { EditIcon } from '@chakra-ui/icons'\nimport './style.scss'\nimport { gql } from 'apollo-boost'\nimport { useMutation } from '@apollo/react-hooks'\nimport { IconButton } from '@chakra-ui/react'\nimport { PostTypeTest } from '../../constants'\n\ninterface Values {\n  title: string\n  content: string\n  category: string\n  images: string[]\n  isPublic: boolean\n}\n\ninterface EditPostFormProps {\n  visible:boolean\n  onCreate: (values: Values)=>void\n  onCancel: () => void\n}\n\nconst UPLOAD_IMAGE = gql`\n    mutation sendImageToCloud($file: Image!) {\n      sendImageToCloud(file: $file) {\n        message,\n        res\n      }\n    }\n`\n\nconst CREATE_POST = gql`\n    mutation createPost($input: NewPostInput!) {\n      createPost(input: $input) {\n        _id,\n      }\n    }\n`\n\nconst EditPostForm:React.FC<EditPostFormProps> = ({\n  visible,\n  onCreate,\n  onCancel\n}) => {\n  const [form] = Form.useForm()\n\n  const [postType, setPostType] = useState({ value: 'roast' })\n\n  const [uploadImage] = useMutation(UPLOAD_IMAGE)\n\n  const [fileList, setFileList] = useState([])\n  const [postImages, setPostImages] = useState([])\n\n  const onClick = (value:any) => {\n    setPostType({\n      value: value.key\n    })\n    form.setFieldsValue({\n      ...form.getFieldsValue(),\n      category: value.key\n    })\n  }\n\n  const menu = (\n    <Menu onClick={onClick}>\n      {\n        Object.entries(PostTypeTest).map(([key, value]) =>\n          <Menu.Item key={key}>\n            <a>{value}</a>\n          </Menu.Item>)\n      }\n    </Menu>\n  )\n\n  const onOk = () => {\n    form.validateFields()\n      .then(values => {\n        console.log(values)\n        const input = {\n          ...values,\n          images: postImages\n        }\n        onCreate(input as any)\n      })\n      .catch(err => {\n        console.log('Validate failed', err)\n      })\n  }\n\n  const onCancel1 = () => {\n    onCancel()\n  }\n\n  const uploadButton = (\n    <div>\n      <PlusOutlined/>\n      <div style={{ marginTop: 8 }}>上传图片</div>\n    </div>\n  )\n\n  const handleUploadImg = (data:any) => {\n    setFileList(data.fileList)\n  }\n\n  const uploadProps = {\n    beforeUpload: (file: File) => {\n      uploadImage({ variables: { file } })\n        .then(({ data: { sendImageToCloud: { message, res } } }) => {\n          console.info(message)\n          setPostImages((postImages || []).concat(res))\n        })\n        .catch(() => {\n          console.log('error')\n        })\n      return false\n    }\n  }\n\n  return (\n    <Modal\n      visible={visible}\n      closable={false}\n      className={'post-modal'}\n      okText={'确认发布'}\n      cancelText={'取消'}\n      onCancel={onCancel1}\n      onOk={onOk}\n    >\n      <Form\n        form={form}\n        name={'post'}\n      >\n        <Form.Item\n          name={'title'}\n          rules={[{ required: true, message: '请输入标题!' }]}>\n          <Input placeholder={'请输入标题'}/>\n        </Form.Item>\n        <Row justify={'space-between'}>\n          <Col>\n            <Form.Item\n              name={'category'}\n              label={'选择一个帖子分类：'}\n              initialValue={postType.value}\n            >\n              <Dropdown overlay={menu} trigger={['click']}>\n                <a onClick={e => e.preventDefault()}>\n                  {(PostTypeTest as any)[postType.value]} <DownOutlined/>\n                </a>\n              </Dropdown>\n            </Form.Item>\n          </Col>\n          <Col>\n            <Form.Item\n              name={'isPublic'}\n              label={'公开这篇帖子：'}\n              initialValue={true}\n            >\n              <Switch\n                checkedChildren={<CheckOutlined />}\n                unCheckedChildren={<CloseOutlined />}\n                defaultChecked\n              />\n            </Form.Item>\n          </Col>\n        </Row>\n        <Form.Item\n          name={'content'}\n          rules={[{ required: true, message: '发布内容不能为空！' }]}>\n          <Input.TextArea rows={10} placeholder={'这里输入内容~'}/>\n        </Form.Item>\n        <Form.Item\n          name={'images'}\n        >\n          <Upload\n            action=''\n            fileList={fileList}\n            listType={'picture-card'}\n            onPreview={() => {} }\n            onChange={handleUploadImg}\n            {...uploadProps}\n          >\n            {uploadButton}\n          </Upload>\n        </Form.Item>\n      </Form>\n    </Modal>)\n}\n\nconst EditPostModal = () => {\n  const [visible, setVisible] = useState(false)\n\n  const [createPost] = useMutation(CREATE_POST)\n\n  const onCreate = (input:Values) => {\n    createPost({ variables: { input } })\n      .then(({ data }) => {\n        console.log(data)\n        setVisible(false)\n        message.success('发布成功！')\n      })\n      .catch(() => {\n        message.warning('发布失败了:(')\n      })\n  }\n\n  const onCancel = () => {\n    setVisible(false)\n  }\n\n  return <>\n    <IconButton variant={'link'} onClick={() => setVisible(true)} icon={<EditIcon/>} aria-label={'new post'}/>\n    <EditPostForm\n      visible={visible}\n      onCreate={onCreate}\n      onCancel={onCancel}\n    />\n  </>\n}\n\nexport default EditPostModal\n","import React, { FunctionComponent, useState } from 'react'\nimport {\n  Avatar,\n  Box,\n  Divider,\n  Flex,\n  Link,\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n  Text\n} from '@chakra-ui/react'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '../../store/rootReducers'\nimport { User } from '../../store/user/types'\nimport { ProjUrl } from '../../constants'\n\ninterface UserPopoverProps {\n  handleLogout: () => void\n}\nconst UserPopover:FunctionComponent<UserPopoverProps> = ({ handleLogout }) => {\n  const [isOpen, setIsOpen] = useState(false)\n  const { name, avatar, email } = useSelector<RootState, User>(state => state.user.me)\n\n  const open = () => setIsOpen(!isOpen)\n  const close = () => setIsOpen(false)\n\n  return <>\n    <Avatar userSelect={'none'} name={name} h={['24px', '40px']} w={ ['24px', '40px']} src={avatar} onClick={open}/>\n    <Popover isOpen={isOpen} onClose={close}>\n      <PopoverTrigger>\n        <Box h={'40px'} w={'1px'} visibility={'hidden'}/>\n      </PopoverTrigger>\n      <PopoverContent zIndex={999} bg={'white'} p={'8px 0'} _focus={{ boxShadow: 'unset' }}>\n        <Flex as={'li'} p={'8px 20px'} align={'center'}>\n          <Flex>\n            <Avatar cursor={'pointer'} name={name} src={avatar}/>\n          </Flex>\n          <Flex marginLeft={'16px'} direction={'column'}>\n            <Text cursor={'pointer'} fontWeight={500}>{name}</Text>\n            <Box as={Text} cursor={'pointer'} color={'gray.600'}\n              _hover={{ textDecoration: 'underline' }}>{email}</Box>\n          </Flex>\n        </Flex>\n        <Divider/>\n        <Flex as={'li'} direction={'column'}>\n          <Box as={Text} p={'8px 20px'} cursor={'pointer'} color={'gray.600'}\n            _hover={{ color: 'gray.900' }}>个人信息</Box>\n          <Box as={Text} p={'8px 20px'} cursor={'pointer'} color={'gray.600'}\n            _hover={{ color: 'gray.900' }}>我的帖子</Box>\n          <Box as={Text} p={'8px 20px'} cursor={'pointer'} color={'gray.600'}\n            _hover={{ color: 'gray.900' }}>设置</Box>\n          <Divider/>\n        </Flex>\n        <Flex as={'li'} direction={'column'}>\n          <Link as={'a'} target={'_blank'} href={ProjUrl} p={'8px 20px'} cursor={'pointer'} color={'gray.600'}\n            _hover={{ color: 'gray.900' }}>加入我们</Link>\n          <Box as={Text} p={'8px 20px'} cursor={'pointer'} color={'gray.600'}\n            _hover={{ color: 'gray.900' }} onClick={handleLogout}>注销</Box>\n        </Flex>\n\n      </PopoverContent>\n    </Popover>\n  </>\n}\n\n// @ts-ignore\nexport default UserPopover\n// @ts-ignore\n","export default __webpack_public_path__ + \"static/media/logo.625ca3d3.svg\";","import React, { ChangeEvent, useRef, useState } from 'react'\nimport {\n  Box,\n  Flex,\n  IconButton,\n  Image,\n  Input,\n  InputGroup,\n  InputLeftElement,\n  InputRightElement,\n  useColorMode\n} from '@chakra-ui/react'\nimport { SearchIcon, BellIcon, MoonIcon, SunIcon } from '@chakra-ui/icons'\n\nimport EditPostModal from '../../pages/editPostModal'\nimport { useDispatch, useSelector } from 'react-redux'\n\nimport { useHistory } from 'react-router-dom'\nimport Login from '../../pages/login'\n\nimport { RootState } from '../../store/rootReducers'\nimport { User } from '../../store/user/types'\nimport { PostFilter } from '../../store/home/types'\nimport { updateKeyword } from '../../store/home/actions'\nimport UserPopover from '../UserPopover'\nimport logo from '../../assets/images/logo.svg'\nimport { getFromLocalStorage, setToLocalStorage } from '../../utils'\n\nconst HeaderContent = () => {\n  const { colorMode, toggleColorMode, setColorMode } = useColorMode()\n  const [inputExpanded, setInputExpanded] = useState(false)\n  const inputRef = useRef<HTMLInputElement>(null)\n  const history = useHistory()\n  const user = useSelector<RootState, User>(state => state.user.me)\n  const { keyword: keywordFormRedux } = useSelector<RootState, PostFilter>(state => state.home.filters)\n  const [keyword, setKeyword] = useState('')\n  const dispatch = useDispatch()\n\n  React.useEffect(() => {\n    const systemColor = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'\n    const color = getFromLocalStorage('color-mode') || systemColor\n    setColorMode(color)\n  }, [])\n\n  const handleLogout = () => {\n    localStorage.removeItem('me')\n    localStorage.removeItem('token')\n  }\n\n  const handleSearchBtnClicked = () => {\n    inputRef.current?.focus()\n    setInputExpanded(prevState => {\n      if (prevState) {\n        dispatch(updateKeyword({ keyword }))\n        setKeyword('')\n      }\n      return !prevState\n    })\n\n    return false\n  }\n\n  return <Flex m={['0 24px', '0 24px', '0 48px', '0 48px']} width={'100%'} wrap={'wrap'}\n    justify={'space-between'} align={'center'} gridGap={'10px'}\n    padding={{ sm: '0 12px', md: '0 16px' }}\n  >\n    <Flex userSelect={'none'} onClick={() => history.push('/')} flex={1} align={'center'} justify={'flex-start'} className={'left-panel'}>\n      <Image src={logo} w={{ base: '24px', sm: '24px', md: '40px' }} h={{ base: '24px', sm: '24px', md: '40px' }}/>\n      <Box cursor={'pointer'} as={'span'} ml={'16px'}\n        fontSize={['20px', '20px', '38px', '38px']} fontWeight={600} fontFamily={'cursive'}>Monkey</Box>\n      <Box cursor={'pointer'} as={'span'}\n        fontSize={['20px', '20px', '38px', '38px']} fontWeight={300} fontFamily={'monospace'}\n        color={'purple.400'}>Bar</Box>\n    </Flex>\n    <Flex flex={1} align={'center'}\n      justifyContent={'flex-end'} className={'right-panel'}>\n      <InputGroup\n        transition={'all .3s ease-in-out'} display={{ base: 'none', sm: 'block' }} w={inputExpanded ? '240px' : '40px'}\n      >\n        <InputLeftElement>\n          <IconButton\n            height={'40px'}\n            boxShadow={0}\n            variant={'link'}\n            aria-label=\"Search database\" icon={<SearchIcon/>} className={'shadow-none'}\n            onClick={handleSearchBtnClicked}/>\n        </InputLeftElement>\n        <Input\n          ref={inputRef}\n          border={0}\n          paddingRight={'4px'}\n          defaultValue={keywordFormRedux}\n          placeholder={'请输入关键字'}\n          onBlur={() => setInputExpanded(false)}\n          onChange={({ target: { value } }: ChangeEvent<HTMLInputElement>): void => setKeyword(value)}\n          onKeyDown={({ key }: { key: string }) => key === 'Enter' ? handleSearchBtnClicked() : undefined}\n        />\n      </InputGroup>\n      {user && <EditPostModal/>}\n      <IconButton\n        variant={'link'}\n        isDisabled\n        onClick={toggleColorMode}\n        aria-label={'notifications'}\n        icon={<BellIcon/>}\n        fontSize={'20px'}\n      />\n      <IconButton\n        variant={'link'}\n        onClick={toggleColorMode}\n        aria-label={'dark-mode'}\n        icon={colorMode === 'light' ? <MoonIcon/> : <SunIcon/>}\n        fontSize={'20px'}\n        mr={'16px'}\n      />\n      {\n        user ? <UserPopover handleLogout={handleLogout}/> : <Login/>\n      }\n    </Flex>\n    <Flex w={'100%'} display={{ base: 'flex', sm: 'none' }} pt={{ base: '12px', sm: '0px' }} gridGap={'12px'}>\n      <InputGroup\n        minW={'300px'}\n        rounded=\"md\"\n        bg=\"gray.100\"\n        borderWidth=\"1px\"\n        _focus={{\n          outline: 'none',\n          bg: 'white',\n          boxShadow: 'outline',\n          borderColor: 'gray.200'\n        }}\n      >\n        <InputRightElement width=\"4.5rem\">\n          <IconButton\n            h=\"1.75rem\" size=\"md\"\n            isDisabled={!keyword}\n            variant={'link'}\n            aria-label=\"Search database\" icon={<SearchIcon/>} className={'shadow-none'}\n            onClick={handleSearchBtnClicked}/>\n        </InputRightElement>\n        <Input\n          border={0}\n          paddingRight={'4px'}\n          defaultValue={keywordFormRedux}\n          placeholder={'请输入关键字'}\n          onChange={({ target: { value } }: ChangeEvent<HTMLInputElement>): void => setKeyword(value)}\n          onKeyDown={({ key }: { key: string }) => key === 'Enter' ? handleSearchBtnClicked() : undefined}\n        />\n      </InputGroup>\n\n    </Flex>\n  </Flex>\n}\nconst Header = () => {\n  return (<>\n    <Box\n      zIndex={500}\n      as={'nav'}\n      position={'absolute'}\n      top={'24px'}\n      left={0}\n      right={0}\n      shadow={location.pathname !== '/' ? 'rgba(0, 0, 0, 0.05) 0px 4x 12px 0px' : 'unset'}>\n      <Flex\n        as={'header'}\n        justify={'space-between'}\n        maxW={'1192px'}\n        width={'100%'}\n        m={'auto'}\n        flex={1}\n        height={'65px'}\n        maxH={'100px'}\n        pb={'48px'}\n        align={'center'}\n        className={'header'}\n      >\n        <HeaderContent/>\n      </Flex>\n    </Box>\n    <Box\n      h={'65px'}\n      m={'24px'}\n      visibility={'hidden'}\n    />\n  </>\n  )\n}\n\nexport default Header\n","import { extendTheme } from '@chakra-ui/react'\nimport { createBreakpoints } from '@chakra-ui/theme-tools'\n\nconst breakpoints = createBreakpoints({\n  sm: '576px',\n  md: '768px',\n  lg: '992px',\n  xl: '1200px'\n})\n\nexport const titleColor = {\n  light: 'gray.700',\n  dark: 'gray.200'\n}\n\nexport const styles = {\n  global: (props: any) => ({\n    'html, body': {\n      fontSize: 'sm',\n      color: props.colorMode === 'dark' ? 'white' : 'gray.600',\n      lineHeight: 'tall'\n    },\n    img: { filter: props.colorMode === 'dark' ? 'brightness(65%)' : '' },\n    hr: { color: props.colorMode === 'dark' ? 'gray.100' : 'gray.200' },\n    div: { borderBottomColor: props.colorMode === 'dark' ? 'gray.700' : 'gray.200' },\n    h2: { color: props.colorMode === 'dark' ? 'gray.200' : 'gray.900' },\n    h3: { color: props.colorMode === 'dark' ? 'gray.300' : 'gray.600' },\n    span: { color: props.colorMode === 'dark' ? 'gray.300' : 'gray.500' },\n    p: { color: props.colorMode === 'dark' ? 'gray.300' : 'gray.500' },\n    small: { color: props.colorMode === 'dark' ? 'gray.400' : 'gray.400' },\n    a: {\n      color: props.colorMode === 'dark' ? 'teal.300' : 'teal.500'\n    }\n  })\n}\n\nexport const customTheme = extendTheme({ breakpoints, styles })\n","import React, { Component, ErrorInfo } from 'react'\ninterface IProps{\n  children: any\n}\nexport default class ErrorBoundary extends Component<IProps, { hasError: any }> {\n  constructor (props: any) {\n    super(props)\n    this.state = { hasError: false }\n  }\n\n  static getDerivedStateFromError (error: any) {\n    // Update state so the next render will show the fallback UI.\n    console.log(error)\n    return { hasError: true }\n  }\n\n  componentDidCatch (error: Error, info: ErrorInfo) {\n    // You can also log the error to an error reporting service\n    console.log(error, info)\n  }\n\n  render () {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return <h1>Something went wrong.</h1>\n    }\n\n    return this.props.children\n  }\n}\n","import React from 'react'\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom'\nimport { ChakraProvider, Box } from '@chakra-ui/react'\nimport { ApolloProvider } from '@apollo/react-hooks'\nimport { Provider } from 'react-redux'\nimport store from './store'\nimport client from './utils/apollo-init'\nimport routes from './constants/routes'\nimport Header from './components/Header'\nimport { customTheme } from './constants/theme'\nimport ErrorBoundary from './containers/ErrorBoundary'\n\nimport './styles/layout.scss'\nimport './App.css'\nfunction App () {\n  return (\n    <Provider store={store}>\n      <ErrorBoundary>\n        <ApolloProvider client={client}>\n          <ChakraProvider theme={customTheme}>\n            <Router>\n              <Box className={'main-layout'}>\n                <Header />\n                <div className={'content-wrapper'}>\n                  <Switch>\n                    {routes.map((route, i) => (\n                      <Route {...route} key={i} />\n                    ))}\n                  </Switch>\n                </div>\n              </Box>\n            </Router>\n          </ChakraProvider>\n        </ApolloProvider>\n      </ErrorBoundary>\n    </Provider>\n  )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals'\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\nimport './styles/global.scss'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n","export const getFromLocalStorage = (key: string) => {\n  const target = localStorage.getItem(key)\n  if (target) {\n    return JSON.parse(target)\n  } else {\n    return null\n  }\n}\n\nexport const setToLocalStorage = (key: string, value: any):void => {\n  localStorage.setItem(key, JSON.stringify(value))\n}\n"],"sourceRoot":""}